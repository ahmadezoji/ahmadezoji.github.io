<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bid Form</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h3>Enter Bid Details</h3>
  <label>Amount: <input type="number" id="amount" /></label><br><br>
  <label>Period (days): <input type="number" id="period" /></label><br><br>
  <button onclick="submitData()">Submit</button>

  <script>
    const tg = window.Telegram ? window.Telegram.WebApp : null;

    function submitData() {
      const amount = document.getElementById("amount").value;
      const period = document.getElementById("period").value;
      const payload = { amount, period };

      if (tg) {
        // ✅ inside Telegram
        tg.sendData(JSON.stringify(payload));
        tg.close();
      } else {
        // ✅ outside Telegram (browser)
        // Option A: redirect to your bot’s deep link with data
        // window.location.href = `https://t.me/YOUR_BOT_USERNAME?start=${btoa(JSON.stringify(payload))}`;

        // Option B: send to your backend API
        fetch("https://yourserver.com/api/bid", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        })
        .then(res => res.json())
        .then(resp => alert("✅ Bid submitted successfully!"))
        .catch(err => alert("❌ Failed: " + err));
      }
    }

    if (tg) tg.expand();
  </script>
</body>
</html>
